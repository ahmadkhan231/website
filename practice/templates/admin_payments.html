
{% extends "base.html" %}

{% block title %}Payment Dashboard - S-E-C Agency{% endblock %}

{% block content %}
<section style="padding:3rem 0;">
    <div class="container">
        <h1 style="text-align:center;margin-bottom:3rem;">Payment Dashboard</h1>
        
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:2rem;margin-bottom:3rem;">
            <div style="background:#28a745;color:white;padding:2rem;border-radius:10px;text-align:center;">
                <h3>Total Payments</h3>
                <div style="font-size:2.5rem;font-weight:bold;">{{ summary.total_payments }}</div>
            </div>
            <div style="background:#007bff;color:white;padding:2rem;border-radius:10px;text-align:center;">
                <h3>Total Revenue</h3>
                <div style="font-size:2.5rem;font-weight:bold;">PKR {{ "{:,}".format(summary.total_amount) }}</div>
            </div>
        </div>
        
        <div style="background:white;padding:2rem;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,0.1);">
            <h2 style="margin-bottom:2rem;">Recent Payments</h2>
            
            {% if summary.recent_payments %}
            <div style="overflow-x:auto;">
                <table style="width:100%;border-collapse:collapse;">
                    <thead>
                        <tr style="background:#f8f9fa;">
                            <th style="padding:1rem;border:1px solid #ddd;text-align:left;">ID</th>
                            <th style="padding:1rem;border:1px solid #ddd;text-align:left;">Customer</th>
                            <th style="padding:1rem;border:1px solid #ddd;text-align:left;">Package</th>
                            <th style="padding:1rem;border:1px solid #ddd;text-align:left;">Amount</th>
                            <th style="padding:1rem;border:1px solid #ddd;text-align:left;">Transaction ID</th>
                            <th style="padding:1rem;border:1px solid #ddd;text-align:left;">Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for payment in summary.recent_payments %}
                        <tr>
                            <td style="padding:1rem;border:1px solid #ddd;">{{ payment.id }}</td>
                            <td style="padding:1rem;border:1px solid #ddd;">{{ payment.customer_name }}</td>
                            <td style="padding:1rem;border:1px solid #ddd;">{{ payment.package_type }}</td>
                            <td style="padding:1rem;border:1px solid #ddd;">PKR {{ "{:,}".format(payment.amount) }}</td>
                            <td style="padding:1rem;border:1px solid #ddd;">{{ payment.transaction_id }}</td>
                            <td style="padding:1rem;border:1px solid #ddd;">{{ payment.payment_date }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p style="text-align:center;color:#666;padding:2rem;">No payments recorded yet.</p>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}
